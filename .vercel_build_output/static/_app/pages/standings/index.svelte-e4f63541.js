import{ae as J,S as q,i as z,s as C,af as Y,j as D,m as b,o as k,x as _,u as h,v as I,ai as V,k as E,l as y,n as N,f as v,r as F,w as M,d as g,O as H,e as T,t as j,c as W,a as P,g as O,b as L,a2 as Q,Y as S,I as X,h as K,W as ie,A as ce,aj as fe,a9 as ue,N as Z,ak as me,al as de}from"../../chunks/vendor-60eb0dec.js";import{b as _e,g as ge,a as pe}from"../../chunks/leagueUsers-b0fdd0b7.js";import{l as $e,a as x}from"../../chunks/index.svelte_svelte&type=style&lang-b0d2c838.js";import{g as he}from"../../chunks/nflState-b19b4ad8.js";import{w as U,c as G}from"../../chunks/news-c1036290.js";import{a as ve,r as ee}from"../../chunks/universalFunctions-311859ab.js";import"../../chunks/navigation-51b348a1.js";import"../../chunks/singletons-ff603286.js";const we=async()=>{if(J(G).matchupWeeks)return J(G);const[o,e,s]=await U(he(),ge(),_e()).catch(m=>{console.error(m)}),t=e.season,n=e.settings.playoff_week_start-1;if(e.status!="in_season"&&e.status!="complete")return null;let a=0;if(o.season_type=="regular"?a=o.display_week>n?n:o.display_week:o.season_type=="post"&&(a=n),a<2)return null;const l=[];for(let m=a-1;m>0;m--)l.push(fetch(`https://api.sleeper.app/v1/league/${$e}/matchups/${m}`,{compress:!0}));const c=await U(...l),r=[];for(const m of c){const A=m.json();if(r.push(A),!m.ok)throw new Error(A)}const i=await U(...r).catch(m=>{console.error(m)}).catch(m=>{console.error(m)});let u={};for(const m of i)u=De(m,u,s.rosters);const f={standingsInfo:u,rostersData:s.rosters,yearData:t};return G.update(()=>f),f},De=(o,e,s)=>{const t={};for(const n of o){t[n.matchup_id]||(t[n.matchup_id]=[]);const a=n.roster_id;e[a]||(e[a]={rosterID:a,wins:0,losses:0,ties:0,divisionWins:s[a-1].settings.division?0:null,divisionLosses:s[a-1].settings.division?0:null,divisionTies:s[a-1].settings.division?0:null}),t[n.matchup_id].push({rosterID:a,division:s[a-1].settings.division,points:n.points})}for(const n in t){const a=t[n][0],l=t[n][1],c=a.division&&l.division&&a.division==l.division;if(a.points>l.points){e[a.rosterID].wins++,e[l.rosterID].losses++,c&&(e[a.rosterID].divisionWins++,e[l.rosterID].divisionLosses++);continue}else if(l.points>a.points){e[l.rosterID].wins++,e[a.rosterID].losses++,c&&(e[l.rosterID].divisionWins++,e[a.rosterID].divisionLosses++);continue}e[a.rosterID].ties++,e[l.rosterID].ties++,c&&(e[a.rosterID].divisionTies++,e[l.rosterID].divisionTies++)}return e};function te(o,e,s){const t=o.slice();return t[5]=e[s],t}function be(o){let e,s,t,n,a,l=(o[2].metadata.team_name?o[2].metadata.team_name:o[2].display_name)+"",c,r,i;return{c(){e=T("div"),s=T("img"),n=E(),a=T("div"),c=j(l),this.h()},l(u){e=W(u,"DIV",{class:!0});var f=P(e);s=W(f,"IMG",{alt:!0,class:!0,src:!0}),n=N(f),a=W(f,"DIV",{});var m=P(a);c=O(m,l),m.forEach(g),f.forEach(g),this.h()},h(){L(s,"alt","team avatar"),L(s,"class","teamAvatar clickable svelte-1t28ir6"),Q(s.src,t="https://sleepercdn.com/avatars/thumbs/"+o[2].avatar)||L(s,"src",t),L(e,"class","clickable team svelte-1t28ir6")},m(u,f){v(u,e,f),S(e,s),S(e,n),S(e,a),S(a,c),r||(i=X(e,"click",o[4]),r=!0)},p(u,f){f&4&&!Q(s.src,t="https://sleepercdn.com/avatars/thumbs/"+u[2].avatar)&&L(s,"src",t),f&4&&l!==(l=(u[2].metadata.team_name?u[2].metadata.team_name:u[2].display_name)+"")&&K(c,l)},d(u){u&&g(e),r=!1,i()}}}function ke(o){let e=o[3][o[5].field]+"",s;return{c(){s=j(e)},l(t){s=O(t,e)},m(t,n){v(t,s,n)},p(t,n){n&9&&e!==(e=t[3][t[5].field]+"")&&K(s,e)},d(t){t&&g(s)}}}function se(o){let e,s;return e=new V({props:{class:"center",$$slots:{default:[ke]},$$scope:{ctx:o}}}),{c(){D(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,n){k(e,t,n),s=!0},p(t,n){const a={};n&265&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){h(e.$$.fragment,t),s=!1},d(t){I(e,t)}}}function Ie(o){let e,s,t,n;e=new V({props:{class:"",$$slots:{default:[be]},$$scope:{ctx:o}}});let a=o[0],l=[];for(let r=0;r<a.length;r+=1)l[r]=se(te(o,a,r));const c=r=>h(l[r],1,1,()=>{l[r]=null});return{c(){D(e.$$.fragment),s=E();for(let r=0;r<l.length;r+=1)l[r].c();t=y()},l(r){b(e.$$.fragment,r),s=N(r);for(let i=0;i<l.length;i+=1)l[i].l(r);t=y()},m(r,i){k(e,r,i),v(r,s,i);for(let u=0;u<l.length;u+=1)l[u].m(r,i);v(r,t,i),n=!0},p(r,i){const u={};if(i&262&&(u.$$scope={dirty:i,ctx:r}),e.$set(u),i&9){a=r[0];let f;for(f=0;f<a.length;f+=1){const m=te(r,a,f);l[f]?(l[f].p(m,i),_(l[f],1)):(l[f]=se(m),l[f].c(),_(l[f],1),l[f].m(t.parentNode,t))}for(F(),f=a.length;f<l.length;f+=1)c(f);M()}},i(r){if(!n){_(e.$$.fragment,r);for(let i=0;i<a.length;i+=1)_(l[i]);n=!0}},o(r){h(e.$$.fragment,r),l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)h(l[i]);n=!1},d(r){I(e,r),r&&g(s),H(l,r),r&&g(t)}}}function Se(o){let e,s;return e=new Y({props:{class:"contrastRow",$$slots:{default:[Ie]},$$scope:{ctx:o}}}),{c(){D(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,n){k(e,t,n),s=!0},p(t,[n]){const a={};n&271&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){h(e.$$.fragment,t),s=!1},d(t){I(e,t)}}}function Le(o,e,s){let{columnOrder:t,roster:n,user:a,standing:l}=e;const c=()=>ve(n.roster_id);return o.$$set=r=>{"columnOrder"in r&&s(0,t=r.columnOrder),"roster"in r&&s(1,n=r.roster),"user"in r&&s(2,a=r.user),"standing"in r&&s(3,l=r.standing)},[t,n,a,l,c]}class ye extends q{constructor(e){super();z(this,e,Le,Se,C,{columnOrder:0,roster:1,user:2,standing:3})}}function ne(o,e,s){const t=o.slice();return t[11]=e[s],t}function re(o,e,s){const t=o.slice();return t[14]=e[s],t}function Te(o){let e,s,t;return s=new fe({props:{"table$aria-label":"League Standings",$$slots:{default:[Pe]},$$scope:{ctx:o}}}),{c(){e=T("div"),D(s.$$.fragment),this.h()},l(n){e=W(n,"DIV",{class:!0});var a=P(e);b(s.$$.fragment,a),a.forEach(g),this.h()},h(){L(e,"class","standingsTable svelte-coyrw9")},m(n,a){v(n,e,a),k(s,e,null),t=!0},p(n,a){const l={};a&131094&&(l.$$scope={dirty:a,ctx:n}),s.$set(l)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){h(s.$$.fragment,n),t=!1},d(n){n&&g(e),I(s)}}}function je(o){let e,s,t,n,a,l;return a=new ue({props:{indeterminate:!0}}),{c(){e=T("div"),s=T("p"),t=j("Loading Standings..."),n=E(),D(a.$$.fragment),this.h()},l(c){e=W(c,"DIV",{class:!0});var r=P(e);s=W(r,"P",{});var i=P(s);t=O(i,"Loading Standings..."),i.forEach(g),n=N(r),b(a.$$.fragment,r),r.forEach(g),this.h()},h(){L(e,"class","loading svelte-coyrw9")},m(c,r){v(c,e,r),S(e,s),S(s,t),S(e,n),k(a,e,null),l=!0},p:Z,i(c){l||(_(a.$$.fragment,c),l=!0)},o(c){h(a.$$.fragment,c),l=!1},d(c){c&&g(e),I(a)}}}function We(o){let e;return{c(){e=j("Team")},l(s){e=O(s,"Team")},m(s,t){v(s,e,t)},d(s){s&&g(e)}}}function Oe(o){let e=o[14].name+"",s;return{c(){s=j(e)},l(t){s=O(t,e)},m(t,n){v(t,s,n)},p:Z,d(t){t&&g(s)}}}function ae(o){let e,s;return e=new V({props:{class:"center wrappable",$$slots:{default:[Oe]},$$scope:{ctx:o}}}),{c(){D(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,n){k(e,t,n),s=!0},p(t,n){const a={};n&131072&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){h(e.$$.fragment,t),s=!1},d(t){I(e,t)}}}function Ae(o){let e,s,t,n;e=new V({props:{class:"center",$$slots:{default:[We]},$$scope:{ctx:o}}});let a=o[6],l=[];for(let r=0;r<a.length;r+=1)l[r]=ae(re(o,a,r));const c=r=>h(l[r],1,1,()=>{l[r]=null});return{c(){D(e.$$.fragment),s=E();for(let r=0;r<l.length;r+=1)l[r].c();t=y()},l(r){b(e.$$.fragment,r),s=N(r);for(let i=0;i<l.length;i+=1)l[i].l(r);t=y()},m(r,i){k(e,r,i),v(r,s,i);for(let u=0;u<l.length;u+=1)l[u].m(r,i);v(r,t,i),n=!0},p(r,i){const u={};if(i&131072&&(u.$$scope={dirty:i,ctx:r}),e.$set(u),i&64){a=r[6];let f;for(f=0;f<a.length;f+=1){const m=re(r,a,f);l[f]?(l[f].p(m,i),_(l[f],1)):(l[f]=ae(m),l[f].c(),_(l[f],1),l[f].m(t.parentNode,t))}for(F(),f=a.length;f<l.length;f+=1)c(f);M()}},i(r){if(!n){_(e.$$.fragment,r);for(let i=0;i<a.length;i+=1)_(l[i]);n=!0}},o(r){h(e.$$.fragment,r),l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)h(l[i]);n=!1},d(r){I(e,r),r&&g(s),H(l,r),r&&g(t)}}}function Ee(o){let e,s;return e=new Y({props:{$$slots:{default:[Ae]},$$scope:{ctx:o}}}),{c(){D(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,n){k(e,t,n),s=!0},p(t,n){const a={};n&131072&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){h(e.$$.fragment,t),s=!1},d(t){I(e,t)}}}function le(o){let e,s;return e=new ye({props:{columnOrder:o[6],standing:o[11],user:o[4][o[1][o[11].rosterID-1].owner_id],roster:o[1][o[11].rosterID-1]}}),{c(){D(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,n){k(e,t,n),s=!0},p(t,n){const a={};n&4&&(a.standing=t[11]),n&22&&(a.user=t[4][t[1][t[11].rosterID-1].owner_id]),n&6&&(a.roster=t[1][t[11].rosterID-1]),e.$set(a)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){h(e.$$.fragment,t),s=!1},d(t){I(e,t)}}}function Ne(o){let e,s,t=o[2],n=[];for(let l=0;l<t.length;l+=1)n[l]=le(ne(o,t,l));const a=l=>h(n[l],1,1,()=>{n[l]=null});return{c(){for(let l=0;l<n.length;l+=1)n[l].c();e=y()},l(l){for(let c=0;c<n.length;c+=1)n[c].l(l);e=y()},m(l,c){for(let r=0;r<n.length;r+=1)n[r].m(l,c);v(l,e,c),s=!0},p(l,c){if(c&86){t=l[2];let r;for(r=0;r<t.length;r+=1){const i=ne(l,t,r);n[r]?(n[r].p(i,c),_(n[r],1)):(n[r]=le(i),n[r].c(),_(n[r],1),n[r].m(e.parentNode,e))}for(F(),r=t.length;r<n.length;r+=1)a(r);M()}},i(l){if(!s){for(let c=0;c<t.length;c+=1)_(n[c]);s=!0}},o(l){n=n.filter(Boolean);for(let c=0;c<n.length;c+=1)h(n[c]);s=!1},d(l){H(n,l),l&&g(e)}}}function Pe(o){let e,s,t,n;return e=new me({props:{$$slots:{default:[Ee]},$$scope:{ctx:o}}}),t=new de({props:{$$slots:{default:[Ne]},$$scope:{ctx:o}}}),{c(){D(e.$$.fragment),s=E(),D(t.$$.fragment)},l(a){b(e.$$.fragment,a),s=N(a),b(t.$$.fragment,a)},m(a,l){k(e,a,l),v(a,s,l),k(t,a,l),n=!0},p(a,l){const c={};l&131072&&(c.$$scope={dirty:l,ctx:a}),e.$set(c);const r={};l&131094&&(r.$$scope={dirty:l,ctx:a}),t.$set(r)},i(a){n||(_(e.$$.fragment,a),_(t.$$.fragment,a),n=!0)},o(a){h(e.$$.fragment,a),h(t.$$.fragment,a),n=!1},d(a){I(e,a),a&&g(s),I(t,a)}}}function Be(o){let e,s,t,n,a,l,c,r,i,u,f,m;ie(o[9]);const A=[je,Te],$=[];function R(d,p){return d[0]?0:1}return c=R(o),r=$[c]=A[c](o),{c(){e=T("h1"),s=j(o[3]),t=E(),n=j(x),a=j(" Standings"),l=E(),r.c(),i=y(),this.h()},l(d){e=W(d,"H1",{class:!0});var p=P(e);s=O(p,o[3]),t=N(p),n=O(p,x),a=O(p," Standings"),p.forEach(g),l=N(d),r.l(d),i=y(),this.h()},h(){L(e,"class","svelte-coyrw9")},m(d,p){v(d,e,p),S(e,s),S(e,t),S(e,n),S(e,a),v(d,l,p),$[c].m(d,p),v(d,i,p),u=!0,f||(m=X(window,"resize",o[9]),f=!0)},p(d,[p]){(!u||p&8)&&K(s,d[3]);let w=c;c=R(d),c===w?$[c].p(d,p):(F(),h($[w],1,1,()=>{$[w]=null}),M(),r=$[c],r?r.p(d,p):(r=$[c]=A[c](d),r.c()),_(r,1),r.m(i.parentNode,i))},i(d){u||(_(r),u=!0)},o(d){h(r),u=!1},d(d){d&&g(e),d&&g(l),$[c].d(d),d&&g(i),f=!1,m()}}}function Re(o,e,s){let{standingsData:t,usersData:n}=e;const a=["fptsAgainst","divisionTies","divisionWins","fpts","ties","wins"],l=[{name:"W",field:"wins"},{name:"T",field:"ties"},{name:"L",field:"losses"},{name:"Div W",field:"divisionWins"},{name:"Div T",field:"divisionTies"},{name:"Div L",field:"divisionLosses"},{name:"FPTS",field:"fpts"},{name:"FPTS Against",field:"fptsAgainst"}];let c=!0,r,i,u,f;ce(async()=>{const{standingsInfo:$,yearData:R,rostersData:d}=await t;s(4,f=await n),s(1,r=d),s(3,u=R);for(const w in $){const B=r[$[w].rosterID-1];$[w].fpts=ee(B.settings.fpts+B.settings.fpts_decimal/100),$[w].fptsAgainst=ee(B.settings.fpts_against+B.settings.fpts_against_decimal/100)}let p=Object.keys($).map(w=>$[w]);for(const w of a)!p[0][w]&&p[0][w]!=0||(p=[...p].sort((B,oe)=>oe[w]-B[w]));s(2,i=p),s(0,c=!1)});let m;function A(){s(5,m=window.innerWidth)}return o.$$set=$=>{"standingsData"in $&&s(7,t=$.standingsData),"usersData"in $&&s(8,n=$.usersData)},[c,r,i,u,f,m,l,t,n,A]}class Ve extends q{constructor(e){super();z(this,e,Re,Be,C,{standingsData:7,usersData:8})}}function Fe(o){let e,s,t;return s=new Ve({props:{standingsData:o[0],usersData:o[1]}}),{c(){e=T("div"),D(s.$$.fragment),this.h()},l(n){e=W(n,"DIV",{class:!0});var a=P(e);b(s.$$.fragment,a),a.forEach(g),this.h()},h(){L(e,"class","holder svelte-131ijax")},m(n,a){v(n,e,a),k(s,e,null),t=!0},p(n,[a]){const l={};a&1&&(l.standingsData=n[0]),a&2&&(l.usersData=n[1]),s.$set(l)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){h(s.$$.fragment,n),t=!1},d(n){n&&g(e),I(s)}}}async function Ye(){const o=we(),e=pe();return{props:{standingsData:o,usersData:e}}}function Me(o,e,s){let{standingsData:t,usersData:n}=e;return o.$$set=a=>{"standingsData"in a&&s(0,t=a.standingsData),"usersData"in a&&s(1,n=a.usersData)},[t,n]}class Qe extends q{constructor(e){super();z(this,e,Me,Fe,C,{standingsData:0,usersData:1})}}export{Qe as default,Ye as load};
